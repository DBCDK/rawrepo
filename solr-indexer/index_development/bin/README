

content_service_get_rec.sh ar[mdpsfiv]
Find and write out a record from a RR
-a <agency>     Agency id for the record
-r <recordid>   Id for the wanted record
-m <MODE>       RAW|MERGED|COLLECTION - default RAW
-d <deleted>    false: don't fetch deleted, true:fetch deleted - default false
-p <private>    true:include enrichment, false: only common - default true
-s <service>    name of the contentservice - default devel8:10042/RawRepoContentService
-f <file>       output file for fetched records - output will be appended - default output will be written to file agency.recordid
-i <file>       file with agency:recordid lines - output will be treated according to -f
-v <verbose>    more info if true - defalult false

F.eks:

../bin/content_service_get_rec.sh -i 1.fil -s http://content-service.rawrepo.fbstest.mcp1-proxy.dbc.dk/RawRepoContentService -m MERGED

vil trække sammenskrevne poster listet i 1.fil ud og lægge dem i seperate filer (det antages at man står i kataloget solr-indexer/index_development/data).

rr_upload.sh ar[mdps]
Sending update requests to a updateservice
-s <service>    name of the updateservice - default updateservice.url from /home/mib/.ocb-tools/testrun.properties
-f <file>       name of file containing the record
-p <path>       path to a folder containing files with names <agencyid>.<recordid> - all such files in the folder will be sent
-v <verbose>    more info if true - defalult false

../bin/rr_upload.sh -p /home/mib/iscrum/rawrepo/solr-indexer/index_development/data

vil så efterfølgende lægge disse poster ind i ens rawrepo. Hvis ellers de rigtige dockers er startet vil de også blive indexeret.

Når man blot vil se hvad der sker når nogle poster indexeres med eksisterende trim af solr og indexudtræk :

		Kør scriptet updateservice/docker/bin/start_index_docker.sh - starter en updateservice med egen rawrepo base.
		Kør scriptet rawrepo/docker/bin/start_solrserver_dev.sh - Opretter en tom solr base.
		Kør scriptet /rawrepo/docker/bin/start_solr_indexer_dev.sh - starter en indexer der indexerer alt hvad der bliver puttet på kø i solr-sync workeren.
		Læg poster ind i rr via updateservicen vha rr_upload.sh


Hvis man vil modificere et index :

		Ret rawrepo/solr-indexer/src/main/reources indexer.js eller dbc_indexer.js (første indeholder systemrettede indexer mens anden er DATA indexer)
		Kør scriptet /rawrepo/docker/bin/start_solr_indexer_dev.sh - genstarter indexeren med rettelserne
		Læg poster ind i rr via updateservicen vha rr_upload.sh

Hvis man vil oprette et nyt index :

		Tilret rawrepo/solr-indexer/solr-config/schema.xml - her defineres indexes så solr kender dem
		Kør scriptet rawrepo/docker/bin/start_solrserver_dev.sh - genstarter solr serveren med det nye index
		Udfør "Hvis man vil modificere et index"
